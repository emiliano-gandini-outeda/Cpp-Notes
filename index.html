<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>C++ Notes</title>
    <link rel="icon" type="image/png" href="https://upload.wikimedia.org/wikipedia/commons/thumb/1/18/ISO_C%2B%2B_Logo.svg/250px-ISO_C%2B%2B_Logo.svg.png">
    <script src="https://cdn.tailwindcss.com"></script>
    <script defer src="https://unpkg.com/alpinejs@3.x.x/dist/cdn.min.js"></script>
    <style>
        :root {
            --color-dark-grey: #2D2D2D;
            --color-background: #1A1A1A;
            --color-surface: #3A3A3A;
            --color-dark-red: #B71C1C;
            --color-dark-red-light: #D32F2F;
            --color-text-primary: #E0E0E0;
            --color-text-secondary: #B0B0B0;
            --color-borders: #4A4A4A;
        }
        body {
            background-color: var(--color-background);
            color: var(--color-text-primary);
            font-family: 'Inter', sans-serif;
        }
    </style>
</head>

<body>
    
<!-- Hero Section -->
<section class="relative h-[60vh] flex flex-col items-center justify-center text-center bg-cover bg-center" style="background-image: url(c++.jpg)">
    <div class="bg-[rgba(26,26,26,0.7)] absolute inset-0"></div>
    <div class="relative z-10">
        <h1 class="text-4xl md:text-6xl font-extrabold mb-4">C++ Notes</h1>
        <p class="text-lg text-[var(--color-text-secondary)] max-w-xl mx-auto">
        C++ notes from my studies, made onto a static site. 
        </p>
    </div>
</section>

<!-- Main -->
<section class="container mx-auto py-8 px-4 flex gap-8" x-data="cardApp()">

    <!-- Sidebar Filters -->
    <aside class="bg-[var(--color-dark-grey)] p-4 rounded-lg w-64 flex-shrink-0"
           style="height: fit-content;">

        <h2 class="text-lg font-bold mb-4">Filters</h2>

        <!-- Filter checkboxes -->
        <div class="flex flex-col gap-2">
            <template x-for="tag in allTags" :key="tag">
                <label class="flex items-center gap-3 cursor-pointer">
                    <input type="checkbox"
                           class="form-checkbox w-5 h-5 text-[var(--color-dark-red)] rounded"
                           :value="tag"
                           @change="toggleTag(tag)"
                           :checked="selectedTags.includes(tag)">
                    <span x-text="tag" class="text-[var(--color-text-primary)]"></span>
                </label>
            </template>
        </div>

        <!-- Clear filters button -->
        <button @click="selectedTags = []"
                class="mt-4 w-full py-2 rounded bg-[var(--color-dark-red)]
                       text-[var(--color-text-primary)]
                       hover:bg-[var(--color-dark-red-light)] transition">
            Clear Filters
        </button>
    </aside>

    <!-- Main Content -->
    <div class="flex-1">
        <!-- Search Bar -->
        <div class="relative w-full mb-6">
            <span class="absolute inset-y-0 left-4 flex items-center pointer-events-none text-[var(--color-text-secondary)]">
                <!-- Search Icon -->
                <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none"
                     viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                    <path stroke-linecap="round" stroke-linejoin="round"
                          d="M21 21l-4.35-4.35m0 0A7.5 7.5 0 1110.65 5.65a7.5 7.5 0 016.0 11.0z" />
                </svg>
            </span>
            <input type="text" placeholder="Search cards..."
                class="w-full pl-12 pr-4 py-2 rounded-full border border-[var(--color-borders)]
                        bg-[var(--color-surface)] text-[var(--color-text-primary)]
                        placeholder-[var(--color-text-secondary)]
                        focus:outline-none
                        focus:border-[var(--color-dark-red)]
                        focus:ring-2 focus:ring-[var(--color-dark-red)]
                        shadow-sm transition"
                x-model="searchQuery">
        </div>
        
        <!-- Cards -->
        <div class="mt-8">
            <h2 class="section-header mb-6">Notes</h2>

            <!-- Masonry container -->
            <div id="masonry-container" class="relative">
                <template x-for="card in filteredCards" :key="card.title">
                    <div class="masonry-item bg-[var(--color-surface)] text-[var(--color-text-primary)]
                                rounded shadow p-4 hover:shadow-lg transition flex flex-col overflow-hidden
                                absolute opacity-0"
                         x-init="$nextTick(() => layoutMasonry())">
                        <!-- Card Title -->
                        <h3 class="text-xl font-bold mb-2 break-words" x-text="card.title"></h3>

                        <!-- Card Text -->
                        <p class="text-[var(--color-text-secondary)] mb-4 break-words" x-text="card.text"></p>

                        <!-- More Button (1/3 width, right-aligned) -->
                        <div class="flex justify-end">
                            <a :href="card.url"
                            class="bg-[var(--color-dark-red)] text-[var(--color-text-primary)] px-4 py-2 rounded
                                    transition duration-300 ease-in-out transform hover:scale-105 active:scale-95
                                    text-center block"
                            style="width: 33.333%;">
                                More
                            </a>
                        </div>
                    </div>
                </template>
            </div>
        </div>
    </div>
</section>


<script>
function cardApp() {
    return {
        // Search input
        searchQuery: '',

        // Selected tags for filtering
        selectedTags: [],

        // All available filters/tags
        allTags: ['Filter 1', 'Filter 2', 'Filter 3', 'Filter 4'],

        // Card data
        cards: [
            { title: 'Binary Search', text: 'Efficient aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaalgorithm for sorted arrays.', tags: ['Filter 1'], url: 'binary-search.html' },
            { title: 'Classes in C++', text: 'Learn how to define and use classes.', tags: ['Filter 2'], url: 'classes.html' },
            { title: 'Pointers', text: 'Understanding pointers and memory.', tags: ['Filter 3'], url: 'pointers.html' },
            { title: 'Linked Lists', text: 'Data structaaaaaaaaaaaaaaaaaaaaaure for dynamic data.', tags: ['Filter 4'], url: 'linked-lists.html' },
            { title: 'Quick Sort', text: 'Fast sorting algorithm.', tags: ['Filter 1'], url: 'quick-sort.html' },
            { title: 'Stacks', text: 'LIFO data structure exam loremple.', tags: ['Filter 3'], url: 'stacks.html' },
            { title: 'Queues', text: 'FIFO data structuaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaare example.', tags: ['Filter 3'], url: 'queues.html' },
            { title: 'Recursion', text: 'Techniques to solve problems recursively.', tags: ['Filter 2'], url: 'recursion.html' },
            { title: 'Merge Sort', text: 'Divide-and-conquer sorting algorithm.', tags: ['Filter 1'], url: 'merge-sort.html' },
        ],

        // Toggle a tag on/off when clicked
        toggleTag(tag) {
            if (this.selectedTags.includes(tag)) {
                this.selectedTags = this.selectedTags.filter(t => t !== tag);
            } else {
                this.selectedTags.push(tag);
            }
        },

        // Filter cards based on search + selected tags
        get filteredCards() {
            const filtered = this.cards.filter(card => {
                const matchesSearch = card.title.toLowerCase().includes(this.searchQuery.toLowerCase()) ||
                                      card.text.toLowerCase().includes(this.searchQuery.toLowerCase());
                const matchesTags = this.selectedTags.length === 0 || card.tags.some(tag => this.selectedTags.includes(tag));
                return matchesSearch && matchesTags;
            });
            
            // Trigger layout after filter changes
            this.$nextTick(() => {
                setTimeout(() => this.layoutMasonry(), 100);
            });
            
            return filtered;
        },

        // Masonry layout function
        layoutMasonry() {
            const container = document.getElementById('masonry-container');
            const items = container.querySelectorAll('.masonry-item');
            
            if (items.length === 0) return;

            // Get container width and calculate columns
            const containerWidth = container.offsetWidth;
            const itemWidth = Math.floor(containerWidth / Math.max(1, Math.floor(containerWidth / 300))); // Min 300px per item
            const columns = Math.floor(containerWidth / itemWidth);
            const gap = 16; // 1rem gap
            
            // Calculate actual item width with gaps
            const actualItemWidth = (containerWidth - (gap * (columns - 1))) / columns;
            
            // Initialize column heights
            const columnHeights = new Array(columns).fill(0);
            
            items.forEach((item, index) => {
                // Set item width
                item.style.width = `${actualItemWidth}px`;
                item.style.position = 'absolute';
                
                // Find shortest column
                let shortestColumn = 0;
                for (let i = 1; i < columnHeights.length; i++) {
                    if (columnHeights[i] < columnHeights[shortestColumn]) {
                        shortestColumn = i;
                    }
                }
                
                // Position item
                const x = shortestColumn * (actualItemWidth + gap);
                const y = columnHeights[shortestColumn];
                
                item.style.left = `${x}px`;
                item.style.top = `${y}px`;
                item.style.opacity = '1';
                
                // Update column height
                columnHeights[shortestColumn] += item.offsetHeight + gap;
            });
            
            // Set container height
            const maxHeight = Math.max(...columnHeights);
            container.style.height = `${maxHeight}px`;
        }
    }
}

// Layout on window resize
window.addEventListener('resize', () => {
    setTimeout(() => {
        const app = Alpine.evaluate(document.querySelector('[x-data="cardApp()"]'), 'layoutMasonry()');
    }, 100);
});
</script>

</body>
</html>